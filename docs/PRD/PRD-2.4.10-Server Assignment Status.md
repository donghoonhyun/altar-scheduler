# PRD 2.4.10 Server Assignment Status UI

## 🧩 섹션 개요

본 섹션은 **복사별 배정 현황(Server Assignment Status)** 페이지의 구조, UI 요소, 데이터 표현 방식 및 동작 흐름을 정의한다.
이 화면은 플래너가 특정 월의 모든 미사 일정과 복사들의 배정 현황 및 월별 배정 요약을 한눈에 파악하고 관리하기 위해 제공된다.

---

## 🧩 구성 구조

```
ServerAssignmentStatus (Page)
 ├── 상단 헤더
 │     ├── 뒤로가기 버튼
 │     ├── 월 네비게이션 (이전/다음 달)
 │     ├── 타이틀 & 월 상태 뱃지 (예: 최종확정)
 │     └── 컨트롤 바
 │           ├── 보기 모드 토글: [복사별 | 날짜별]
 │           └── 복사별 서브 토글: [월별 | 일별] (복사별 모드 시 노출)
 │
 ├── 데이터 그리드 (Table) - 일별 보기 (Daily View)
 │     ├── Sticky Header (Top): 날짜 및 미사 제목
 │     └── Data Cells: 주/부 배정 표시
 │
 └── 데이터 그리드 (Table) - 월별 보기 (Monthly View)
       ├── Sticky Header (Top): 전월 / 당월 / 차월 헤더 (+ 상태 뱃지)
       └── Data Cells: 각 월별 배정 미사 리스트 (카드 형태)
```

---

## 🧩 주요 기능

| 기능 | 설명 |
| --- | --- |
| **월간 이동** | 이전/다음 달 버튼으로 기준 월을 변경하고 데이터를 다시 로드한다. |
| **보기 모드 전환** | **복사별 / 날짜별** 보기 전환 및 복사별 보기 내 **일별 / 월별** 상세 보기 전환을 지원한다. |
| **일별 조회 (기본)** | 선택된 월의 1일부터 말일까지의 모든 배정 현황을 매트릭스(Matrix) 형태로 조회한다. |
| **월별 조회 (신규)** | **전월 / 당월 / 차월 (3개월)**의 배정 현황을 3단 컬럼으로 요약하여 보여준다. 각 셀에는 배정된 미사 목록이 카드 형태로 나열된다. |
| **배정 상태 표시** | 각 복사가 해당 미사에 배정되었는지(주/부)를 시각적으로 구분하여 표시한다. |
| **월 상태 표시** | 월별 보기 헤더에 각 월의 상태(예: 미확정, 최종확정)를 뱃지로 표시하여 진행 상황을 파악할 수 있게 한다. |
| **스크롤 편의** | 데이터가 많을 경우를 대비해 가로/세로 스크롤을 제공하며, 헤더와 이름 컬럼은 고정(Sticky)된다. |

---

## 🧩 데이터 그리드 규칙 (일별 보기)

| 요소 | 스타일 / 규칙 |
| --- | --- |
| **Header Row** | `M/D (요일)` + 미사 제목 뱃지. <br>일요일: `bg-red-50 text-red-500` <br>토요일: `bg-blue-50 text-blue-500` |
| **Name Column** | Sticky Left. 이름(진하게) + 세례명(연하게) + (배정횟수) 표시. `border-r`로 구분. |
| **Cell: 주복사** | `bg-blue-600 text-white font-bold` (텍스트: "주") |
| **Cell: 부복사** | `bg-blue-100 text-blue-800 border-blue-200` (텍스트: "부") |
| **구분선** | 다크모드 가시성 강화를 위해 `dark:divide-slate-600` 적용. |

## 🧩 데이터 그리드 규칙 (월별 보기)

| 요소 | 스타일 / 규칙 |
| --- | --- |
| **Header Row** | 3개 컬럼: **전월 | 당월 | 차월**. <br>각 헤더 옆에 해당 월의 `StatusBadge` 표시. <br>텍스트: `YYYY년 M월` |
| **Data Cell** | 해당 월에 배정된 미사 이벤트를 카드 형태로 나열 (Flex Wrap). <br>`[주/부] 날짜(요일) 미사명` 형태. |
| **Card Style** | 주복사: 파란색 테두리/텍스트, 부복사: 회색/기본 스타일. |

---

## 🧩 데이터 연동

* **Members**: `server_groups/{groupId}/members` (Active only)
* **Mass Events**: `server_groups/{groupId}/mass_events` (Query by Date Range)
  * 일별 보기: 현재 월 Data
  * 월별 보기: 전월 + 당월 + 차월 Data (3개월치 Fetch)
* **Month Status**: `server_groups/{groupId}/month_status/{YYYYMM}` (헤더 뱃지용)

---

## 🧩 UX 고려사항

* **디폴트 뷰**: 전체적인 흐름 파악을 위해 **'월별 보기'**를 기본으로 제공.
* **가독성**: 좁은 화면에서도 정보를 효율적으로 표현하기 위해 폰트 크기 최적화.
* **직관성**: 색상 코딩(파랑=배정)을 통해 상태를 즉각적으로 인지 가능하게 하고, 월별 보기에서는 상태 뱃지를 통해 마감 여부 확인 용이.
